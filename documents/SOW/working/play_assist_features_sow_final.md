---
project_name: "ウディこん助 作品プレイ補助機能開発（最終版）"
status: "Todo"
owner: "開発チーム"
created_at: "2025-07-11"
updated_at: "2025-07-11"
---

### SOW (Statement of Work)

- **Project Name:** `ウディこん助 作品プレイ補助機能開発（最終版）`
- **Creation Date:** `2025-07-11`
- **Revision History:**
  - `v1.0 (2025-07-11): Initial draft`
  - `v2.0 (2025-07-11): 要件定義書追記（評価システム・UI設計）に基づく見直し`
  - `v3.0 (2025-07-11): 最終追記（画面遷移・詳細画面）に基づく完全版`

#### 1. Project Purpose & Background

要件定義書の最終更新により、Single Page Application形式での画面遷移機能と詳細編集画面の要求が追加された。本機能は、ウディコン公式準拠の評価システムを持ち、直感的な画面遷移による効率的な作品管理を可能とするChrome拡張機能として実装する。

**最終確定要件:**
- ウディコン公式準拠: 6項目×10点制評価システム
- 2画面構成: メイン画面（一覧） ↔ 詳細画面（編集）
- 自動保存機能: 設定内容の自動永続化
- 画面遷移: 作品クリック → 詳細画面、👈戻るボタン → メイン画面

#### 2. Scope of Work

### 2.1 メイン画面（作品一覧）実装

**リスト表示UI:**
```
☑ | No | 作品名 | 📁 | Ver | 評価(熱/斬/物/画/遊/他)
```

**機能要件:**
- 6-80作品のテーブル形式表示
- フィルタ機能: [全表示][評価済み][未評価][新着]
- 検索機能: 作品名による絞り込み
- 作品行クリック → 詳細画面遷移
- 各列の固定幅による整列表示
- スクロール対応（6件表示推奨）

**表示項目:**
- **既プレイフラグ**: ☑（評価済み）/ □（未評価）
- **No**: 001-080の3桁0埋め形式
- **作品名**: 最大20文字表示（クリック可能）
- **ローカルフォルダ**: 📁（設定済み）/ 空白（未設定）
- **最新Ver**: ✅（最新）/ 🔔（更新あり）/ 🆕（新規）
- **評価**: 6項目を「/」区切りで表示（例: 10/9/10/8/9/8）

### 2.2 詳細画面（作品編集）実装

**画面レイアウト:**
```
👈戻る | No.XXX 作品名
■ リンク設定
■ 評価 (6項目×10点)
■ 感想 (2000字以内)
💾 自動保存状態
```

**機能要件:**
- 👈戻るボタン: メイン画面復帰（設定自動保存）
- ウディコン公式リンク: URLクリックで外部ページ開く
- ローカルフォルダリンク: file://アクセス
- 6項目評価システム: スライダーまたは数値入力
- 感想入力: 2000字制限、40字幅、文字数カウント
- 自動保存: 3秒間隔 + フィールド変更時

### 2.3 画面遷移システム実装

**ナビゲーション仕様:**
- **SPA構造**: 単一ポップアップ内での画面切り替え
- **状態保持**: メイン画面のフィルタ・検索状態保持
- **データ同期**: 詳細画面変更のメイン画面即座反映
- **自動保存**: 画面遷移時の確実なデータ永続化

**実装技術:**
```javascript
class NavigationController {
  // メイン ↔ 詳細画面遷移制御
  showDetailView(gameId)
  showMainView()
  
  // 自動保存機能
  startAutoSave()
  saveCurrentEdit()
  
  // 状態管理
  saveMainViewState()
  restoreMainViewState()
}
```

### 2.4 ウディコン公式準拠評価システム

**評価項目実装:**
```typescript
interface WodiconRating {
  熱中度: number;        // 1-10点
  斬新さ: number;        // 1-10点  
  物語性: number;        // 1-10点
  画像音声: number;      // 1-10点
  遊びやすさ: number;    // 1-10点
  その他: number;        // 1-10点
  total: number;         // 合計点（自動計算）
}
```

**UI実装仕様:**
- スライダーコントロール（1-10、初期値0）
- リアルタイム合計点計算・表示
- 評価完了時の既プレイフラグ自動ON
- 未評価項目の視覚的明示

### 2.5 感想システム詳細実装

**入力制御:**
- **文字数制限**: 2000字厳密チェック
- **レイアウト**: 40字幅相当のテキストエリア
- **カウンター**: リアルタイム文字数表示
- **自動保存**: 入力停止3秒後に自動保存実行

**表示仕様:**
```
■ 感想 (2000字以内 / 40字幅)
┌─────────────────────────────────────┐
│素晴らしいストーリー展開でした。特に  │
│ラストの展開は涙なしには見られません  │
│でした。キャラクター同士の関係性も丁  │
│寧に描かれており、RPGとしても非常に  │
│完成度が高いです。...                │
└─────────────────────────────────────┘
文字数: 125/2000 字
```

### 2.6 データ構造・永続化システム

**最終データモデル:**
```typescript
interface GameWork {
  id: number;                    // 作品ID (1-80)
  no: string;                    // 作品番号（001-080形式）
  title: string;                 // 作品タイトル
  author: string;                // 作者名
  genre: string;                 // ジャンル
  description: string;           // 概要
  wodicon_url: string;           // ウディコン公式URL
  local_folder_path: string;     // ローカルフォルダパス
  is_played: boolean;            // 既プレイフラグ（評価済み=true）
  
  rating: WodiconRating;         // 6項目評価
  review: string;                // 感想（2000字以内）
  review_length: number;         // 文字数カウント
  version_status: 'latest' | 'updated' | 'new';
  
  created_at: Date;
  updated_at: Date;
  last_played: Date | null;
  
  // 将来機能用
  update_notification: boolean;
  bbs_check: boolean;
  last_update_check: Date | null;
}
```

**保存戦略:**
- **chrome.storage.local**: 全作品データの永続保存
- **自動保存**: 3秒間隔 + フィールド変更時
- **手動保存**: 明示的保存ボタン
- **エラー処理**: 保存失敗時の適切な警告表示

#### 3. Out of Scope

以下は本開発の対象外とする：

- ウディコン公式サイトとの自動連携・データ同期
- 評価の自動投稿・外部共有機能
- 複数画面の同時表示
- 高度なアニメーション効果
- オフライン対応（基本機能のみ）
- 外部ツールとの連携

#### 4. Deliverables

**ソースコード:**
- Chrome拡張機能完全版
  - manifest.json（権限設定完備）
  - popup.html/popup.js（SPA実装）
  - popup.css（レスポンシブ対応）
  - background.js（データ管理）
  - navigation.js（画面遷移制御）

**サンプルデータ:**
- 6作品の完全テストデータ
- 評価済み/未評価の混在パターン
- ウディコン公式URL完備データ

**設計ドキュメント:**
- 画面遷移フロー設計書
- SPA実装仕様書
- 自動保存システム仕様書

#### 5. Assumptions & Constraints

**Assumptions:**
- Chrome拡張機能ポップアップサイズ制限（550px×500px）
- chrome.storage.local 5MB制限内での実装
- ウディコン公式サイトURL形式不変
- 自動保存による十分なデータ保護

**Constraints:**
- Single Page Application形式でのUI実装
- Chrome拡張機能セキュリティ制約
- file://アクセスはユーザー権限設定必須
- 外部サイトとの直接連携不可

#### 6. Team & Roles

**Client-side:**
- Product Owner: `要求者`
- Requirements Finalization: `要求者`
- User Acceptance Testing: `要求者`

**Vendor/Developer-side:**
- Lead Developer: `Claude Code`
- Frontend Engineer: `Claude Code`
- Data Architect: `Claude Code`
- Navigation Designer: `Claude Code`

#### 7. Schedule

**最終確定マイルストーン:**
- **SPA基盤実装:** `2025-07-12`
- **メイン画面実装:** `2025-07-13`
- **詳細画面実装:** `2025-07-14`
- **画面遷移機能実装:** `2025-07-15`
- **自動保存機能実装:** `2025-07-16`
- **統合テスト・最終調整:** `2025-07-17`
- **Final Delivery:** `2025-07-18`

#### 8. Acceptance Criteria

以下の条件を満たした場合、開発完了とみなす：

**画面遷移機能:**
- 作品行クリック → 詳細画面遷移が正常動作
- 👈戻るボタン → メイン画面復帰が正常動作
- 画面状態（フィルタ・検索）が適切に保持される
- 遷移時のデータ同期が正常動作

**ウディコン準拠機能:**
- 6項目×10点制評価システムが正常動作
- 合計点の自動計算が正確
- 評価完了時の既プレイフラグ自動ON
- ウディコン公式ページリンクが正常動作

**自動保存機能:**
- 3秒間隔での自動保存が正常動作
- フィールド変更時の即座保存
- 保存状態の適切な表示
- 画面遷移時の確実なデータ永続化

**感想システム:**
- 2000字制限の厳密な動作
- 40字幅相当の適切な表示
- リアルタイム文字数カウント
- 大量テキスト入力時の性能維持

**全体動作:**
- 6-80作品での安定動作
- ブラウザ再起動後のデータ保持
- エラー状況での適切な処理
- ユーザビリティの高いUI/UX

#### 9. Change Log

- **2025-07-11 (v1.0) by Claude Code:**
  - **Reason for Change:** 初版作成
  - **Details of Change:** 基本仕様策定

- **2025-07-11 (v2.0) by Claude Code:**
  - **Reason for Change:** 要件定義書追記（プレイ補助・UIデザイン）
  - **Details of Change:** 評価システム・UI設計の大幅変更

- **2025-07-11 (v3.0) by Claude Code:**
  - **Reason for Change:** 要件定義書最終追記（画面遷移・詳細画面）
  - **Details of Change:** 
    - SPA形式での2画面構成追加
    - 自動保存機能の詳細仕様追加
    - 画面遷移システムの完全設計
    - 👈戻るボタンを含むナビゲーション仕様確定