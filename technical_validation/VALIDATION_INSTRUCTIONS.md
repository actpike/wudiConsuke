# 🌊 ウディこん助 Chrome拡張機能 技術検証手順書

## 📋 概要

この手順書では、ウディこん助（WodiConsuke）Chrome拡張機能の技術的実現可能性を検証するためのプロセスを説明します。

## 🚀 事前準備

### 1. 環境要件
- Google Chrome（最新版推奨）
- ウディコン公式サイトへのアクセス可能なネットワーク環境
- 開発者ツールの使用権限

### 2. 拡張機能のインストール
```bash
1. Chrome を開く
2. chrome://extensions/ にアクセス
3. 「デベロッパーモード」を有効にする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. technical_validation/chrome_extension フォルダを選択
```

### 3. 必要な権限設定
```bash
1. 拡張機能の「詳細」をクリック
2. 「ファイルのURLへのアクセスを許可する」を有効にする
3. 通知権限を許可する（ブラウザがプロンプトを表示した場合）
```

## 🔍 検証手順

### Step 1: 基本動作確認
1. 拡張機能アイコンが表示されることを確認
2. アイコンをクリックしてポップアップが開くことを確認
3. 「Options」リンクから設定ページが開くことを確認

### Step 2: Web監視系機能の検証

#### 2.1 ウディコン公式サイトアクセステスト
```bash
1. https://silversecond.com/WolfRPGEditor/Contest/ にアクセス
2. 拡張機能ポップアップを開く
3. 「サイトアクセステスト」ボタンをクリック
4. 結果を確認:
   ✅ サイトアクセス成功
   ✅ CORS制約回避成功
   ✅ HTML解析成功
```

#### 2.2 期待される結果
- **成功時**: ページ内容が正常に取得され、コンテストデータが検出される
- **失敗時**: CORS エラーまたは権限エラーが表示される

### Step 3: ストレージ機能の検証

#### 3.1 基本動作テスト
```bash
1. ポップアップで「基本動作テスト」をクリック
2. データの読み書きが正常に動作することを確認
```

#### 3.2 容量制限テスト
```bash
1. ポップアップで「容量テスト」をクリック
2. 1MB程度のテストデータが保存できることを確認
3. 使用量が正確に表示されることを確認
```

#### 3.3 期待される結果
- chrome.storage.local での読み書きが正常動作
- 使用容量が正確に表示される
- 5MB制限に対する現在の使用状況が確認できる

### Step 4: ローカルファイル連携の検証

#### 4.1 file://プロトコルテスト
```bash
1. 事前準備で権限設定が完了していることを確認
2. ポップアップで「file://テスト」をクリック
3. 新しいタブでローカルファイルシステムが開くことを確認
```

#### 4.2 期待される結果
- **権限有効時**: file://C:/ などのローカルファイルシステムにアクセス可能
- **権限無効時**: 明確なエラーメッセージが表示される

### Step 5: 通知・アラーム機能の検証

#### 5.1 通知機能テスト
```bash
1. ポップアップで「通知テスト」をクリック
2. デスクトップ通知が表示されることを確認
```

#### 5.2 アラーム機能テスト
```bash
1. ポップアップで「アラームテスト」をクリック
2. アラームが正常に設定されることを確認
3. Background Script でのログを確認
```

### Step 6: データインポート/エクスポート機能の検証

#### 6.1 エクスポート機能
```bash
1. 設定ページ（Options）を開く
2. 「テストデータエクスポート」をクリック
3. JSONファイルがダウンロードされることを確認
4. ファイル内容が正しい形式であることを確認
```

#### 6.2 インポート機能
```bash
1. 設定ページで「ファイルを選択」をクリック
2. エクスポートしたJSONファイルを選択
3. 「テストデータインポート」をクリック
4. インポート成功メッセージが表示されることを確認
```

## 📊 検証結果の記録

### 成功基準
各機能について以下の評価を行います：

| 機能 | 成功基準 | 結果 | 備考 |
|------|----------|------|------|
| サイトアクセス | ✅/❌ | | |
| HTML解析 | ✅/❌ | | |
| ストレージ基本 | ✅/❌ | | |
| ストレージ容量 | ✅/❌ | | |
| file://アクセス | ✅/❌ | | |
| 通知機能 | ✅/❌ | | |
| アラーム機能 | ✅/❌ | | |
| データエクスポート | ✅/❌ | | |
| データインポート | ✅/❌ | | |

### 自動レポート出力
```bash
1. 設定ページで「結果をエクスポート」をクリック
2. 検証結果レポート（JSON形式）がダウンロードされる
3. 詳細ログも「ログ保存」でテキスト形式で出力可能
```

## 🚨 トラブルシューティング

### よくある問題と解決方法

#### 1. CORS エラーが発生する場合
```
解決方法:
- manifest.json の host_permissions が正しく設定されているか確認
- 拡張機能が正しく読み込まれているか確認
- Chrome のセキュリティ設定を確認
```

#### 2. file://アクセスが失敗する場合
```
解決方法:
- chrome://extensions/ で該当拡張機能の詳細を開く
- 「ファイルのURLへのアクセスを許可する」にチェックを入れる
- ページをリロードして再試行
```

#### 3. 通知が表示されない場合
```
解決方法:
- Chrome の通知設定を確認
- サイトの通知許可状態を確認
- システムの通知設定（OS レベル）を確認
```

#### 4. ストレージエラーが発生する場合
```
解決方法:
- Chrome のストレージ容量を確認
- 他の拡張機能との競合を確認
- Chrome を再起動して再試行
```

## 📝 結果報告

検証完了後、以下の情報を含むレポートを作成してください：

1. **実行環境**
   - Chrome バージョン
   - OS 情報
   - 実行日時

2. **検証結果**
   - 各機能の成功/失敗状況
   - 発生したエラーの詳細
   - パフォーマンス情報（レスポンス時間、使用容量など）

3. **制約事項・注意点**
   - 発見された技術的制約
   - ユーザー操作が必要な設定項目
   - 推奨される実装方針

4. **推奨事項**
   - 代替実装案
   - リスク軽減策
   - 優先度付きの改善提案

## 🔄 継続的検証

この検証は以下のタイミングで再実行することを推奨します：

- Chrome ブラウザのメジャーアップデート時
- ウディコン公式サイトの構造変更時
- manifest.json の権限変更時
- 新機能追加時

## ⚡ クイックスタート

初回検証を迅速に実行したい場合：

```bash
1. 拡張機能をインストール
2. ファイルアクセス権限を有効化
3. ウディコン公式サイトを開く
4. 拡張機能ポップアップで「全テスト実行」をクリック
5. 設定ページで詳細結果を確認
```

この手順により、約5分で主要な機能の実現可能性を確認できます。